---
tags:
  - Course
  - 编译原理
---

# 中间代码生成

## 波兰表达式

中缀表达式转后缀表达式的方法：

1. 从最里面的括号开始计算，逐步拆解括号。
2. 将运算符放到最后，按照运算优先级，将运算优先级较小的往后放。

例：$-x-(y*z/(z-x)+y*x)$

1. 拆解 $(z-x)$ 得，-x - (y * z / z x - + y * z)
2. 调整符号顺序得，-x - (y z * z x - / y x * +)
3. 拆解 $(y\ z\ *\ z\ x\ -\ /\ y\ x\ *\ +)$ 得，x - y z * z x - / y x * + -
4. 得到答案。

## 三地址代码转换

### 有向无环图（DAG）

![image-20220528171226698](src/中间代码生成/image-20220528171226698.png)

![image-20220528171311311](src/中间代码生成/image-20220528171311311.png)

### 控制语句翻译

翻译过程：

1. 画出表达式的执行流程图

2. 根据流程图设计三地址代码的翻译

3. 结合三地址代码得到对应的翻译方案

   按照语句执行的顺序和逻辑来翻译即可。

![image-20220528171724221](src/中间代码生成/image-20220528171724221.png)

:::caution

在 `if-then-else` 和 `while-do` 语句中需要写上 `goto S.next`（判断，跳到下一个代码块）或者 `goto S.begin`（循环。回到最初）

:::

![image-20220528171751173](src/中间代码生成/image-20220528171751173.png)
